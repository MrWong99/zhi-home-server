pihole:
  image-tag:
    val: "latest"
    metadata:
      ui.section: "Image"
      ui.displayName: "PiHole Image Tag"
      core.description: "Docker image tag for pihole/pihole"
      core.type: string
  dns-port:
    val: 53
    metadata:
      ui.section: "Network"
      ui.displayName: "DNS Port"
      core.description: "Host port for DNS (UDP/TCP)"
      core.type: int
    validation: |-
      s := fmt.Sprintf("%v", v.Val)
      port, err := strconv.ParseFloat(s, 64)
      if err != nil {
        return []config.ValidationResult{{Message: "DNS port must be a number", Severity: config.Blocking}}, nil
      }
      if port == 53 {
        return []config.ValidationResult{{Message: "Port 53 may conflict with systemd-resolved. Run: sudo sed -i 's/#DNSStubListener=yes/DNSStubListener=no/' /etc/systemd/resolved.conf && sudo systemctl restart systemd-resolved", Severity: config.Warning}}, nil
      }
      return nil, nil
    imports:
      - fmt
      - strconv
  web-port:
    val: 8053
    metadata:
      ui.section: "Network"
      ui.displayName: "Web Admin Port"
      core.description: "Host port for PiHole web admin interface"
      core.type: int
  admin-password:
    val: ""
    metadata:
      ui.section: "Security"
      ui.displayName: "Admin Password"
      core.description: "Password for the PiHole web admin interface"
      core.type: string
      ui.password: true
      config.required: true
    validation: |-
      s, _ := v.Val.(string)
      if s == "" {
        return []config.ValidationResult{{Message: "Admin password is required", Severity: config.Blocking}}, nil
      }
      return nil, nil
  upstream-dns:
    val: "1.1.1.1;8.8.8.8"
    metadata:
      ui.section: "DNS"
      ui.displayName: "Upstream DNS Servers"
      core.description: "Semicolon-separated upstream DNS servers"
      core.type: string
      ui.placeholder: "1.1.1.1;8.8.8.8"
  dnssec:
    val: true
    metadata:
      ui.section: "DNS"
      ui.displayName: "Enable DNSSEC"
      core.description: "Enable DNSSEC validation for DNS queries"
      core.type: bool
  custom-blocklists:
    val: ""
    metadata:
      ui.section: "DNS"
      ui.displayName: "Custom Blocklists"
      core.description: "Comma-separated URLs for additional blocklists"
      core.type: string
      ui.placeholder: "https://example.com/blocklist.txt"
